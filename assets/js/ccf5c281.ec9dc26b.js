"use strict";(self.webpackChunkdomino_docs=self.webpackChunkdomino_docs||[]).push([[4829],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var i=r.createContext({}),u=function(e){var t=r.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=u(e.components);return r.createElement(i.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(a),h=n,m=d["".concat(i,".").concat(h)]||d[h]||p[h]||o;return a?r.createElement(m,s(s({ref:t},c),{},{components:a})):r.createElement(m,s({ref:t},c))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,s=new Array(o);s[0]=h;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[d]="string"==typeof e?e:n,s[1]=l;for(var u=2;u<o;u++)s[u]=a[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,a)}h.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(7294),n=a(6010);const o={tabItem:"tabItem_Ymn6"};function s(e){let{children:t,hidden:a,className:s}=e;return r.createElement("div",{role:"tabpanel",className:(0,n.Z)(o.tabItem,s),hidden:a},t)}},4866:(e,t,a)=>{a.d(t,{Z:()=>w});var r=a(7462),n=a(7294),o=a(6010),s=a(2466),l=a(6550),i=a(1980),u=a(7392),c=a(12);function d(e){return function(e){return n.Children.map(e,(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:r,default:n}}=e;return{value:t,label:a,attributes:r,default:n}}))}function p(e){const{values:t,children:a}=e;return(0,n.useMemo)((()=>{const e=t??d(a);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function h(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:a}=e;const r=(0,l.k6)(),o=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,i._X)(o),(0,n.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(r.location.search);t.set(o,e),r.replace({...r.location,search:t.toString()})}),[o,r])]}function f(e){const{defaultValue:t,queryString:a=!1,groupId:r}=e,o=p(e),[s,l]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=a.find((e=>e.default))??a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:o}))),[i,u]=m({queryString:a,groupId:r}),[d,f]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,o]=(0,c.Nk)(a);return[r,(0,n.useCallback)((e=>{a&&o.set(e)}),[a,o])]}({groupId:r}),g=(()=>{const e=i??d;return h({value:e,tabValues:o})?e:null})();(0,n.useLayoutEffect)((()=>{g&&l(g)}),[g]);return{selectedValue:s,selectValue:(0,n.useCallback)((e=>{if(!h({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),f(e)}),[u,f,o]),tabValues:o}}var g=a(2389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:t,block:a,selectedValue:l,selectValue:i,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.o5)(),p=e=>{const t=e.currentTarget,a=c.indexOf(t),r=u[a].value;r!==l&&(d(t),i(r))},h=e=>{let t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const a=c.indexOf(e.currentTarget)+1;t=c[a]??c[0];break}case"ArrowLeft":{const a=c.indexOf(e.currentTarget)-1;t=c[a]??c[c.length-1];break}}t?.focus()};return n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},t)},u.map((e=>{let{value:t,label:a,attributes:s}=e;return n.createElement("li",(0,r.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>c.push(e),onKeyDown:h,onClick:p},s,{className:(0,o.Z)("tabs__item",b.tabItem,s?.className,{"tabs__item--active":l===t})}),a??t)})))}function v(e){let{lazy:t,children:a,selectedValue:r}=e;const o=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===r));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return n.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==r}))))}function k(e){const t=f(e);return n.createElement("div",{className:(0,o.Z)("tabs-container",b.tabList)},n.createElement(y,(0,r.Z)({},e,t)),n.createElement(v,(0,r.Z)({},e,t)))}function w(e){const t=(0,g.Z)();return n.createElement(k,(0,r.Z)({key:String(t)},e))}},5362:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>u,toc:()=>d});var r=a(7462),n=(a(7294),a(3905)),o=a(4866),s=a(5162);const l={sidebar_position:3,description:"Shared Storage",keywords:["domino","workflow","airflow","data","machine learning","ml","data science","data engineering","dataops","mlops","devops","kubernetes","k8s","helm","python","react","typescript","fastapi","gitops","docker","github","artifacthub","pypi","pip","kind","open source","oss","low code","no code","automation","versio control","collaboration","monitoring","orchestration","data pipeline","shared storage"]},i="Shared Storage",u={unversionedId:"settings/shared_storage",id:"settings/shared_storage",title:"Shared Storage",description:"Shared Storage",source:"@site/docs/settings/shared_storage.mdx",sourceDirName:"settings",slug:"/settings/shared_storage",permalink:"/docs/settings/shared_storage",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,description:"Shared Storage",keywords:["domino","workflow","airflow","data","machine learning","ml","data science","data engineering","dataops","mlops","devops","kubernetes","k8s","helm","python","react","typescript","fastapi","gitops","docker","github","artifacthub","pypi","pip","kind","open source","oss","low code","no code","automation","versio control","collaboration","monitoring","orchestration","data pipeline","shared storage"]},sidebar:"tutorialSidebar",previous:{title:"Secrets",permalink:"/docs/settings/secrets"},next:{title:"Computational Resources",permalink:"/docs/settings/computational_resources"}},c={},d=[{value:"What exactly is Shared Storage?",id:"what-exactly-is-shared-storage",level:3}],p={toc:d},h="wrapper";function m(e){let{components:t,...a}=e;return(0,n.kt)(h,(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"shared-storage"},"Shared Storage"),(0,n.kt)("p",null,"When you have a workflow with more than one piece you may want to transfer data between them."),(0,n.kt)("p",null,"Transfering data between pieces can be done in two ways:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"Using XCOM"),": This is recommended only for small data. By default all values returned by a piece, defined in the ",(0,n.kt)("inlineCode",{parentName:"p"},"OuputModel"),", are returned to xcom and can be read by downstream pieces.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"Using Shared Storage"),": Some Pieces produce data that can not be direclty transfered to downstream Pieces in other way than using disk. A common example is a piece that produces a large file that needs to be used by another piece. In this case, you can use the available ",(0,n.kt)("inlineCode",{parentName:"p"},"Shared Storage")," options."))),(0,n.kt)("h3",{id:"what-exactly-is-shared-storage"},"What exactly is Shared Storage?"),(0,n.kt)("p",null,"Domino's Shared Storage is a mounted volume that can be used by all pieces in a workflow, where each piece can have different access level to this volume.\nWith Shared Storage, you can work with files from different pieces as if they were all on the same file system,\neven if they are running on different machines."),(0,n.kt)("p",null,"Currently, Domino support the following Shared Storage options:"),(0,n.kt)(o.Z,{mdxType:"Tabs"},(0,n.kt)(s.Z,{value:"sharedStorageCompose",label:"Running in compose",default:!0,mdxType:"TabItem"},(0,n.kt)("ul",null,(0,n.kt)("li",null,(0,n.kt)("span",{style:{fontWeight:"bold"}},"None:"),' No shared storage is available. This means that pieces can not "see" each other files.'),(0,n.kt)("li",null,(0,n.kt)("span",{style:{fontWeight:"bold"}},"Local:")," Shared storage is available and the volume is mounted on the same machine that is running the platform.")),"The diagram below shows how the Shared Storage works when running in compose.",(0,n.kt)("section",{style:{justifyContent:"center",display:"flex",marginTop:"10px"}},(0,n.kt)("img",{src:"/img/advanced_workflows/compose-shared-storage.png",alt:"compose shared storage"}))),(0,n.kt)(s.Z,{value:"sharedStorageK8s",label:"Running in Kubernetes",mdxType:"TabItem"},(0,n.kt)("ul",null,(0,n.kt)("li",null,(0,n.kt)("span",{style:{fontWeight:"bold"}},"None:"),'No hared storage is available. This means that pieces can not "see" each other files.'),(0,n.kt)("li",null,(0,n.kt)("span",{style:{fontWeight:"bold"}},"Local:"),"Shared storage is available and the volume is mounted on an AWS S3 bucket folder. This mean each piece result is synced to the S3 bucket as it was a local folder. This option is only available when running in Kubernetes.")),"The diagram below shows how the Shared Storage works when running in Kubernetes.",(0,n.kt)("section",{style:{justifyContent:"center",display:"flex",marginTop:"10px"}},(0,n.kt)("img",{style:{justifyContent:"center"},src:"/img/advanced_workflows/kubernetes-shared-storage.png",alt:"k8s shared storage"})))),(0,n.kt)(o.Z,{mdxType:"Tabs"},(0,n.kt)(s.Z,{value:"sharedStorageSettings",label:"Workflow Shared Storage",default:!0,mdxType:"TabItem"},"To set what type of shared storage the workflow will use go to workflow Settings and choose your desired option in Storage Source dropdown.",(0,n.kt)("section",{style:{justifyContent:"center",display:"flex"}},(0,n.kt)("img",{src:"/img/advanced_workflows/shared_storage_settings.png",alt:"signupgif"}))),(0,n.kt)(s.Z,{value:"pieceSharedStorage",label:"Piece Shared Storage",mdxType:"TabItem"},"To set the access level to the shared storage a Piece will have simply double click on the desired Piece, go to Advanced Options and select the access level on the Storage Access Mode dropdown.",(0,n.kt)("section",{style:{justifyContent:"center",display:"flex"}},(0,n.kt)("img",{src:"/img/advanced_workflows/shared_storage_piece.png",alt:"signupgif"})))))}m.isMDXComponent=!0}}]);